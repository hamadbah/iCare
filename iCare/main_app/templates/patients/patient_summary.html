{% extends 'patient_grid.html' %}
{% block content %}
{% load static %}
<div class="patient-details">
    <div>
        <h5 style="font-weight: bolder;">{{ patient.patient_name }}</h5>
        <p style="font-size: 18px; font-weight: bold;">National ID: {{ patient.national_id }} - DOB: {{
            patient.date_of_birth }}
        </p>
        <p style="font-size: 18px; font-weight: bold;">Gender: {{ patient.gender }} - Phone No: {{ patient.phone }} -
            Address: {{ patient.address }}
        </p>
    </div>
    <div class="card-image">
        <img src="{% static patient.image|cut:'main_app/static/' %}" alt="{{ patient.patient_name }}"
            style="max-width: 150px; height: 180px; border-radius: 8px;" />
    </div>
</div>
<div class="patient-summary">
    <div>
        <h3 style="font-weight: bolder; color: blue;">Summary Page</h3>
    </div>
    <div>
        <a href="{% url 'detail' patient.id %}" class="btn grey darken-2 waves-effect waves-light"
            style="text-transform:none; font-size: 18px;">Back</a>
    </div>
</div>
<div class="row" style="display: flex; justify-content: center; flex-wrap: wrap; gap: 15px; margin-top: 30px;">
    <div class="card blue lighten-4" style="width:180px; min-height:120px;">
        <div class="card-content center-align">
            <span class="card-title">{{ notes.count }}</span>
            <p>Doctor Notes</p>
        </div>
    </div>

    <div class="card green lighten-4" style="width:180px; min-height:120px;">
        <div class="card-content center-align">
            <span class="card-title">{{ vitals.count }}</span>
            <p>Vitals</p>
        </div>
    </div>

    <div class="card orange lighten-4" style="width:180px; min-height:120px;">
        <div class="card-content center-align">
            <span class="card-title">{{ labs.count }}</span>
            <p>Labs</p>
        </div>
    </div>

    <div class="card purple lighten-4" style="width:180px; min-height:120px;">
        <div class="card-content center-align">
            <span class="card-title">{{ prescriptions.count }}</span>
            <p>Prescriptions</p>
        </div>
    </div>

    <div class="card pink lighten-4" style="width:180px; min-height:120px;">
        <div class="card-content center-align">
            <span class="card-title">{{ diagnosis.count }}</span>
            <p>Diagnosis</p>
        </div>
    </div>

    <div class="card grey lighten-4" style="width:180px; min-height:120px;">
        <div class="card-content center-align">
            <span class="card-title">{{ appointments.count }}</span>
            <p>Appointments</p>
        </div>
    </div>
</div>
<div class="grid-container">
    <div class="card">
        <h5 style="font-weight: bolder; color: maroon">Appointments</h5>
        <ul>
            {% for appt in appointments %}
            <li>{{ appt.appointment_date }} {{ appt.appointment_time }} - {{ appt.status }}</li>
            {% empty %}
            <p>No appointments.</p>
            {% endfor %}
        </ul>
    </div>
    <div class="card">
        <h5 style="font-weight: bolder; color: maroon">Vital Signs</h5>
        <ul>
            {% for v in vitals %}
            <li>Temp: {{ v.temperature }}Â°C, HR: {{ v.heart_rate }} bpm, BP: {{ v.systolic_bp }}/{{ v.diastolic_bp }}
            </li>
            {% empty %}
            <p>No vital signs recorded.</p>
            {% endfor %}
        </ul>
    </div>
    <div class="card">
        <h5 style="font-weight: bolder; color: maroon">Prescriptions</h5>
        <ul>
            {% for rx in prescriptions %}
            <li>{{ rx.drug_name }} - {{ rx.dosage }}, {{ rx.frequency }} for {{ rx.duration }}</li>
            {% empty %}
            <p>No prescriptions.</p>
            {% endfor %}
        </ul>
    </div>
</div>
<div class="grid-container">
    <div class="card">
        <h5 style="font-weight: bolder; color: maroon">Doctor Notes</h5>
        <ul>
            {% for note in notes %}
            <li><strong>Subjective:</strong> {{ note.subjective }} <strong>Objective:</strong> {{ note.objective }}
                <strong>Plan:</strong> {{ note.plan }}
            </li>
            {% empty %}
            <p>No doctor notes.</p>
            {% endfor %}
        </ul>
    </div>

    <div class="card">
        <h5 style="font-weight: bolder; color: maroon">Labs</h5>
        <ul>
            {% for lab in labs %}
            <li><strong>Test Name: </strong> {{ lab.test_name }} <strong>Date: </strong> {{ lab.test_date }}
                <strong>Result: </strong> {{ lab.result }} <strong>Status: </strong> {{ lab.status }}
            </li>
            {% empty %}
            <p>No labs requested.</p>
            {% endfor %}
        </ul>
    </div>

    <div class="card">
        <h5 style="font-weight: bolder; color: maroon">Diagnosis</h5>
        <ul>
            {% for diag in diagnosis %}
            <li><strong>Diagnosis Name: </strong> {{ diag.diagnosis_name }} <strong>Date: </strong> {{
                diag.diagnosis_date }}
                <strong>Status: </strong> {{ diag.diagnosis_status }}
            </li>
            {% empty %}
            <p>No diagnosis yet.</p>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}